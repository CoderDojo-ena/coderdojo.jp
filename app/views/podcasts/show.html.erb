<% provide :title, @title + ' - DojoCast' %>
<% provide :desc,  strip_tags(@episode.description).gsub("\n", " ") %>
<% provide :url,   @url %>
<% provide :meta_image,  @episode.cover %>

<%= lazy_image_tag('/podcasts/dojocast-cover.webp', alt: 'DojoCast Cover Photo', class: 'dojocast-cover') %>

<style type="text/css">
  .prev { display: table-cell; font-color: white; text-align: left;   }
  .toc  { display: table-cell; font-color: white; text-align: center; }
  .next { display: table-cell; font-color: white; text-align: right;  }
  .nav a:link, .nav a:visited { color: white; }

  h1#title    { margin-top:  30px; margin-bottom: 20px; text-align: center; }
  .episode h2 { margin-top: 100px; }
  .episode-cover {
    margin: 30px auto;
    @media screen and (min-width: 640px) {
      max-width: 70%;
    }
  }
  .episode-cover img { margin-bottom: 20px;}
</style>

<div style="display: table; font-weight: bolder; width: 100%; padding: 10px 10px; background-color:#3870c4;">
  <p class="nav prev">
    <% if @episode.exists?(offset: -1) %>
      <%= link_to '&larr; prev'.html_safe, podcast_path(@episode.id - 1) %>
    <% else %>
      <%= link_to '&larr; Top'.html_safe, podcasts_path %>
    <% end %>
  </p>
  <p class="nav toc" >
    <a href="/podcasts">DojoCast</a></p>
  <p class="nav next">
    <% if @episode.exists?(offset: +1) %>
      <%= link_to 'next &rarr;'.html_safe, podcast_path(@episode.id + 1) %>
    <% else %>
      <%= link_to 'Top &rarr;'.html_safe, podcasts_path %>
    <% end %>
  </p>
</div>

<div class="container" style="line-height: 1.9em; margin-bottom: -100px;">
  <section class="doc" style="padding: 50px 0px 50px 0px;">
    <div class='episode'>
      <h1 id='title'>📻 <%= @title %></h1>
      <div style='text-align: center; margin-bottom: 60px;'>収録日: <%= @date %></div>

      <iframe class="lazyload" src="https://anchor.fm/coderdojo-japan/embed/episodes/<%= @episode.permalink %>" width="100%" scrolling="no" frameborder="yes" style='margin-bottom: 30px;'></iframe>

      <%= raw @content %>
    </div>
  </section>

  <div style="margin-bottom: 40px;">
    <p style="color: #5F5F5F"><small>面白かったら <a href='https://www.youtube.com/CoderDojoJapan'>YouTube</a> チャンネル登録もぜひ!! 📺✨</small></p>
    <script src="https://apis.google.com/js/platform.js"></script>
    <div class="g-ytsubscribe" data-channelid="UCal5GuoCDCMDQe07w69TuJA" data-layout="full" data-count="default"></div>
  </div>
  
  <section class="text-center list" style="padding-top: 50px; margin-left: -10px;">
    <%= render 'shared/social_buttons' %>
  </section>
</div>

<%= render 'shared/introduce_podcast_apps' %>
